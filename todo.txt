x fix later migrations around showing profiles of users who have created or been assigned to tickets

- when creating an account, the user shouldnt be able to immediately login, this is different than the dev?

- create organization table
- create organization user table



- dont let admin user remove admin status from self or other admin users
- tests for new components, also remember to create new tests anytime we make a new component or update an existing one


x sorted attributes on status and priority dropdowns
x sortable on all tickets table columns

- remove timestamp from due date column either just on creation or out of database completely
x ticket assignment at creation
x ticket table shows creator name and assignee name (or none or name+x if there are multiple)
x ticket select page needs general overhaul, but some kind of back button (close or otherwise)
x restructure layout of ticket select page
x edits to tickets update ticket_history
x add a sidebar to the selected ticket page that shows the comment history, and other history
x format ticket select page, fill height instead of spilling out
x in ticket activity and conversation sidebar, make the scroll bar start at the bottom, make the enter button auto send the message
- add attachments to ticket activity
- suggested ai actions on tickets (respond with x, do y, etc) can use the knowledge base later on
- assignment types, primary, secondary, watcher


- media table
- converstaions and activities both have media array type? or a second table that has media_id, conversation_id, activity_id (one has to be null)

- ticket_conversations table
- all messages between users and clients
- add attachments to conversations
- mentions in activity log
- notifications in general (on sidebar?)
- custom attributes on tickets, created in admin panel

x create organization and organization_user tables, add is_customer bool to profile table
x is_customer bool defaults to false, and existing records set to false
x organization columns: name, description, customer_since, customer_type_id, customer_status_id, total_contract, default_priority_id, is_active
x organization_user columns: organization_id, profile_id
x organization_type table: id, name
    x seed in migrations - (individual, small business, large business, etc)
x organization_status table: id, name
    x seed in migrations - (in pipeline, under contract, cancelled, etc)

- login as a customer
    - build their sidebar
        - dashboard
        - tickets
        - knowledge base
        - help chat
    

- lock down data available to is_customer profiles
- make organization_id be assigned to tickets

- admin panel
    - create ticket_statuses, priorities, organization_types, organization_statuses
    - create attributes (later)
    - create organizations
    - invite users (to organizations or internal)
    - deactivate or make admin users
- email invitation (admin can select an organization or internal and invite a user via email)
    - how to test?
    - additionally generate an invite code if they go directly to the signup page
    - invite code is somehow parsed to tell the server what user is being invited
    - prefill the names, job title, and phone number in invite form (not required though)
    - basically seems like the same process as the signup page, but the admin kicks off the process instead of a signup
    - password reset???

- organization page (non customers can view, admins can edit)
    - show all users in the organization
    - show all tickets in the organization
    - show all details about the organization
        - name, description, customer_since, total_contract, default_priority, status, type
    - admins have ability to edit details

- when a ticket is created (maybe not from UI)
    - priority is set to the default for the organization


- default seed for organizations and organization_users (two orgs, one user in each)


- real time updates all over, tickets, activity, conversations, notifications!!!
x notification icon on sidebar
- notifications page
- clean up filters on tickets page

- seed tickets and assignees and history (probably create them in UI then back them up)
- SEED KNOWLEDGE BASE (what kind of company are we? maybe a clown supply company)

- ai buttons on the activity and conversation sidebars
- eventually the ai buttons will suggest a relevant message or action to take on a ticket
- ai can reference existing messages, and internal and external knowledge base
- after that we wont need the ai button at all

- add db push to github actions
- npm run build and test before deploy??? maybe taken care of on amplify?

- on customer login, they can see their tickets they created (or maybe organization tickets)
- they can create a new ticket, it will get auto assigned somehow
- they can see the ticket conversation history, send messages to it
- help chat, need to flesh this out on both ends
    - eventually the ai will respond to messages
    - tbd
- they can see the knowledge base